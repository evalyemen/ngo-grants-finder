<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NGO Grants Finder - Yemen</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        :root {
            --primary-color: #4CAF50;
            --secondary-color: #f4f4f9;
            --text-color: #333;
            --light-gray: #f9f9f9;
            --white: #fff;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--secondary-color);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            background: var(--white);
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: var(--primary-color);
            margin-bottom: 20px;
        }

        .filters {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
            padding: 15px;
            background: var(--light-gray);
            border-radius: 8px;
            align-items: center;
        }

        .filters select,
        .filters input,
        .filters button {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }

        .filters button {
            background-color: var(--primary-color);
            color: var(--white);
            border: none;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .filters button:hover {
            background-color: #45a049;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: var(--primary-color);
            color: var(--white);
            font-weight: 600;
        }

        tr:nth-child(even) {
            background-color: var(--light-gray);
        }

        tr:hover {
            background-color: #e9e9e9;
        }

        .download-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }

        .download-btn {
            padding: 10px 20px;
            background-color: var(--primary-color);
            color: var(--white);
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }

        .download-btn:hover {
            background-color: #45a049;
        }

        @media (max-width: 768px) {
            .filters {
                flex-direction: column;
                align-items: stretch;
            }

            .filters select,
            .filters input,
            .filters button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>NGO Grants Finder - Yemen</h1>

        <div class="filters">
            <select id="grantTypeFilter">
                <option value="">All Grant Types</option>
                <option value="Government">Government</option>
                <option value="INGO">INGO</option>
                <option value="Private Foundation">Private Foundation</option>
                <option value="Open Call">Open Call</option>
            </select>
            <input type="text" id="searchInput" placeholder="Search by keyword...">
            <button onclick="resetFilters()">Reset Filters</button>
        </div>

        <table id="grantsTable">
            <thead>
                <tr>
                    <th>Grant Name</th>
                    <th>Grant Type</th>
                    <th>Focus Area</th>
                    <th>Deadline</th>
                    <th>Amount</th>
                </tr>
            </thead>
            <tbody id="grantsTableBody">
                <!-- Grants will be inserted here by JavaScript -->
            </tbody>
        </table>

        <div class="download-buttons">
            <button class="download-btn" onclick="downloadCSV()">Download as CSV</button>
            <button class="download-btn" onclick="downloadJSON()">Download as JSON</button>
            <button class="download-btn" onclick="downloadPDF()">Download as PDF</button>
        </div>
    </div>

    <script>
        // Sample grant data
        const grants = [
            { name: "USAID Grants", type: "Government", focus: "Economic Development, Healthcare, Crisis Relief", deadline: "Ongoing", amount: "Varies" },
            { name: "Commonwealth Foundation Grants 2026", type: "Government", focus: "Democracy, Human Rights, Sustainable Development", deadline: "2025-10-23", amount: "Up to £60,000" },
            { name: "Front Line Defenders Award", type: "INGO", focus: "Human Rights Defenders", deadline: "2025-02-28", amount: "Varies" },
            { name: "Van Tienhoven Foundation Grants", type: "Private Foundation", focus: "Nature Protection, Conservation", deadline: "2025-01-31", amount: "Small Grants" },
            { name: "Spencer Foundation Vision Grants", type: "Private Foundation", focus: "Research, Equity, Education", deadline: "2025-02-11", amount: "Varies" },
            { name: "Africa Impact Fundraising Grant", type: "Open Call", focus: "African NGOs, Social Enterprises", deadline: "2025-12-16", amount: "Up to $5,000" },
            { name: "Grand Challenges Africa Grant", type: "Open Call", focus: "Women’s Health, Innovation", deadline: "2025-12-16", amount: "$100,000 - $200,000" },
        ];

        // Function to render grants in the table
        function renderGrants(grantsToRender) {
            const tableBody = document.getElementById("grantsTableBody");
            tableBody.innerHTML = "";
            grantsToRender.forEach(grant => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${grant.name}</td>
                    <td>${grant.type}</td>
                    <td>${grant.focus}</td>
                    <td>${grant.deadline}</td>
                    <td>${grant.amount}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Function to filter grants
        function filterGrants() {
            const typeFilter = document.getElementById("grantTypeFilter").value;
            const searchKeyword = document.getElementById("searchInput").value.toLowerCase();

            let filteredGrants = [...grants];
            if (typeFilter) {
                filteredGrants = filteredGrants.filter(grant => grant.type === typeFilter);
            }
            if (searchKeyword) {
                filteredGrants = filteredGrants.filter(grant =>
                    grant.name.toLowerCase().includes(searchKeyword) ||
                    grant.focus.toLowerCase().includes(searchKeyword) ||
                    grant.type.toLowerCase().includes(searchKeyword)
                );
            }
            renderGrants(filteredGrants);
            return filteredGrants;
        }

        // Function to reset filters
        function resetFilters() {
            document.getElementById("grantTypeFilter").value = "";
            document.getElementById("searchInput").value = "";
            renderGrants(grants);
        }

        // Function to download grants as CSV
        function downloadCSV() {
            const filteredGrants = filterGrants();
            const headers = ["Grant Name", "Grant Type", "Focus Area", "Deadline", "Amount"];
            const csvContent = [
                headers.join(","),
                ...filteredGrants.map(grant =>
                    `"${grant.name}", "${grant.type}", "${grant.focus}", "${grant.deadline}", "${grant.amount}"`
                )
            ].join("\n");

            const blob = new Blob([csvContent], { type: "text/csv" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "ngo_grants_yemen.csv";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        // Function to download grants as JSON
        function downloadJSON() {
            const filteredGrants = filterGrants();
            const jsonContent = JSON.stringify(filteredGrants, null, 2);
            const blob = new Blob([jsonContent], { type: "application/json" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "ngo_grants_yemen.json";
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        }

        // Function to download grants as PDF
        async function downloadPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            // Title
            doc.setFontSize(18);
            doc.text("NGO Grants Finder - Yemen", 105, 15, { align: "center" });

            // Table headers
            const headers = [["Grant Name", "Grant Type", "Focus Area", "Deadline", "Amount"]];

            // Table rows
            const rows = grants.map(grant => [
                grant.name,
                grant.type,
                grant.focus,
                grant.deadline,
                grant.amount
            ]);

            // Add table to PDF
            doc.autoTable({
                head: headers,
                body: rows,
                startY: 25,
                styles: { fontSize: 10 },
                headStyles: { fillColor: [76, 175, 80] }
            });

            // Save PDF
            doc.save("ngo_grants_yemen.pdf");
        }

        // Event listeners for filters
        document.getElementById("grantTypeFilter").addEventListener("change", filterGrants);
        document.getElementById("searchInput").addEventListener("input", filterGrants);

        // Initial render
        renderGrants(grants);
    </script>
</body>
</html>
